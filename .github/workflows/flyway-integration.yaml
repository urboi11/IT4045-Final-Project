# yaml-language-server: $schema=https://json.schemastore.org/github-workflow.json
name: Flyway Migrate
on:
    push:
        branches:
            - main
            - feature/*
    workflow_dispatch:
jobs:
    build:
        runs-on: ubuntu-latest
        permissions:
            contents: read
            packages: write

        steps:
        - uses: actions/checkout@v4
        - name: Set up JDK 11
          uses: actions/setup-java@v4
          with:
            java-version: '17'

        - name: Build with Maven
          run: mvn flyway:migrate -Dsecret_url=${{secrets.SECRET_REPO_URL}} -Dsecret_username=${{secrets.SECRET_REPO_USERNAME}} -Dsecret_password=${{secrets.SECRET_REPO_PASSWORD}}        

